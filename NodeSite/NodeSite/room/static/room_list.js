// Generated by CoffeeScript 1.7.1
$(function() {
  'use strict';
  var $roomList, getRoomList;
  $roomList = $("#room-list");
  getRoomList = function() {
    return $.ajax({
      url: "/room/list/",
      type: "GET",
      success: function(data) {
        var body, item, room, _i, _len;
        if (data.code === 0) {
          body = data.body;
          console.log(body);
          for (_i = 0, _len = body.length; _i < _len; _i++) {
            item = body[_i];
            room = new Room;
            new RoomPresenter(room, $roomList);
            room.init(item);
            room.stop();
            room.getLatestData();
          }
        } else {
          alert(data.body);
        }
      },
      fail: function(data) {
        return alert("[room_list.coffee] get room list faild");
      }
    });
  };
  getRoomList();
});
