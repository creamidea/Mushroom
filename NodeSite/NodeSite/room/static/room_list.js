// Generated by CoffeeScript 1.7.1
'use strict';
$(function() {
  var $roomList, context, getRoomList;
  context = [
    {
      "roomId": 1,
      "roomName": "房间1",
      "plantId": 1,
      "plantName": "蘑菇",
      "time": "2013-12-25 16:41",
      "average": {
        temperature: 18,
        co2: 24,
        humidity: 150
      },
      "sensors": {
        'temperature': [1, 2, 3, 4, 5],
        'co2': [12, 13, 14, 15],
        'humidity': [23, 24, 25, 26, 27]
      },
      "brightness": "yellow",
      "nowPolicy": 1
    }, {
      "roomId": 2,
      "roomName": "房间2",
      "plantId": 2,
      "plantName": "蘑菇",
      "time": "2013-12-26 16:41",
      "average": {
        temperature: 180,
        co2: 240,
        humidity: 150
      },
      "sensors": {
        'temperature': [1, 2, 3, 4, 5],
        'co2': [12, 13, 14, 15],
        'humidity': [23, 24, 25, 26, 27]
      },
      "brightness": "blue",
      "nowPolicy": 1
    }, {
      "roomId": 3,
      "roomName": "房间3",
      "plantId": 3,
      "plantName": "蘑菇",
      "time": "2013-12-25 16:41",
      "average": {
        temperature: 18,
        co2: 24,
        humidity: 150
      },
      "sensors": {
        'temperature': [1, 2, 3, 4, 5],
        'co2': [12, 13, 14, 15],
        'humidity': [23, 24, 25, 26, 27]
      },
      "brightness": "yellow",
      "nowPolicy": 1
    }
  ];
  $roomList = $("#room-list");
  getRoomList = function() {
    return $.ajax({
      url: "/room/list/",
      type: "GET",
      success: function(data) {
        var body, item, room, _i, _len;
        body = data.body;
        for (_i = 0, _len = body.length; _i < _len; _i++) {
          item = body[_i];
          room = new Room;
          new RoomPresenter(room, $roomList);
          room.init(item);
          room.stop();
          room.getLatestData();
        }
      },
      fail: function(data) {
        return alert("[room_list.coffee] get room list faild");
      }
    });
  };
  getRoomList();
});
